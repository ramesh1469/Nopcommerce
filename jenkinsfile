pipeline{
    agent { label "Docker"}
    stages{
        stage ("git clone"){
            steps{
                git url: "https://github.com/ramesh1469/Nopcommerce.git",
                branch: "main"

            }
        }
        stage ("docker image"){
            agent { label "Docker"}
            steps{
                sh """
                    aws ecr-public get-login-password --region us-east-1 | docker login --username AWS --password-stdin public.ecr.aws/w3l4u7g2,
                    docker build -t ram2 .,
                    docker tag ram2:latest public.ecr.aws/w3l4u7g2/ram2:latest,
                    docker push public.ecr.aws/w3l4u7g2/ram2:latest
                    """                  
            }
        } 
    }
}
